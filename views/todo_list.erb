<script src="/js/jquery-1.9.1.min.js"></script>
<script src="/js/jquery.sparkline.min.js"></script>
<script src="/js/jquery-ui.min.js"></script>

<link rel="stylesheet" href="/js/jquery-ui.min.css">

<script src="/js/todo_tag.js"></script>

<form id="new_todo"  method="get" action="/new_todo">
    <labeL for="text">ToDo:</labeL>
    <input name="text" id="text" type="text" size=100 />
    <select name="tag_id" id="tag_id">
        <% if @tag_list %>
            <% @tag_list.each do |b| %>
                <option value="<%= b[:id] %>" <%= "selected='true'" if b[:tag] == 'TODO' %>><%= b[:tag] %></option>
            <% end %>
        <% end %>
    </select>
    <input type="submit" value="go">
</form>

<table class="table" >
    <% @todos.each_with_index do |todo, index| %>
        <tr>
            <td>
                <%= todo[:text] %>
            </td>
            <td>
                <span class="tag_span"></span>
                <select onchange="update_tag_id(this,<%= todo[:id]%>)">
                <% if @tag_list %>
                    <% @tag_list.each do |b| %>
                        <option value="<%= b[:id] %>" <%= "selected='true'" if b[:id] == todo[:tag_id] %>><%= b[:tag] %></option>
                    <% end %>
                <% end %>
                </select>
            </td>
            <td  style="min-width:85px" >
                <%= todo[:created_at] %>
            </td>
            <td>
                <a href="/rm_todo?id=<%=todo[:id]%>">X</a>
            </td>
        </tr>
        </div>
    <% end if @todos%>
</table>
